#
# Created by PoolManager(PoolManager) at Thu Oct 24 09:47:42 CDT 2019
#
rc set max threads 2147483647
pm create -type=wass stage
pm set stage -p2p-fortransfer=no -stage-allowed=yes
pm create -type=wass default
pm set default -p2p-fortransfer=yes -stage-allowed=no
psu set regex on
psu set allpoolsactive off

psu create unit -store dmz.dcache-devel-test@enstore
psu create unit -store hsm.dcache-devel-test@enstore
psu create unit -store int.dcache-devel-test@enstore
psu create unit -store none.none@enstore
psu create unit -store resilient.dcache-devel-test@enstore
psu set storage unit resilient.dcache-devel-test@enstore -required=2 -onlyOneCopyPer=hostname,rack
psu create unit -store resilient-tape.dcache-devel-test@enstore
psu set storage unit resilient-tape.dcache-devel-test@enstore -required=1
psu create unit -store volatile.dcache-devel-test@enstore
psu create unit -net 0.0.0.0/0.0.0.0
psu create unit -net ::/0
psu create unit -protocol */*

psu create ugroup any-protocol
psu addto ugroup any-protocol */*

psu create ugroup internal
psu addto ugroup internal int.dcache-devel-test@enstore

psu create ugroup resilient
psu addto ugroup resilient resilient.dcache-devel-test@enstore

psu create ugroup resilient-tape
psu addto ugroup resilient-tape resilient-tape.dcache-devel-test@enstore

psu create ugroup tape
psu addto ugroup tape hsm.dcache-devel-test@enstore

psu create ugroup volatile
psu addto ugroup volatile volatile.dcache-devel-test@enstore

psu create ugroup wan
psu addto ugroup wan dmz.dcache-devel-test@enstore

psu create ugroup stage
psu addto ugroup stage resilient-tape.dcache-devel-test@enstore

psu create ugroup world-net
psu addto ugroup world-net 0.0.0.0/0.0.0.0
psu addto ugroup world-net ::/0

psu create pool dmsdca15-1
psu create pool dmsdca15-1.1
psu create pool dmsdca15-2
psu create pool dmsdca15-2.1
psu create pool dmsdca15-3
psu create pool dmsdca15-3.1
psu create pool dmsdca15-4
psu create pool dmsdca15-4.1
psu create pool dmsdca15-5
psu create pool dmsdca15-5.1
psu create pool dmsdca15-6
psu create pool dmsdca15-6.1
psu create pool dmsdca15-7
psu create pool dmsdca15-7.1
psu create pool dmsdca15-8
psu create pool dmsdca15-8.1
psu create pool dmsdca18-1
psu create pool dmsdca18-1.1
psu create pool dmsdca18-2
psu create pool dmsdca18-2.1
psu create pool dmsdca19-1
psu create pool dmsdca19-1.1
psu create pool dmsdca19-2
psu create pool dmsdca19-2.1
psu create pool dmsdca20-1
psu create pool dmsdca20-1.1
psu create pool dmsdca20-2
psu create pool dmsdca20-2.1
psu create pool dmsdca20-3
psu create pool dmsdca20-3.1
psu create pool dmsdca20-4
psu create pool dmsdca20-4.1
psu create pool dmsdca21-1
psu create pool dmsdca21-1.1
psu create pool dmsdca21-2
psu create pool dmsdca21-2.1
psu create pool dmsdca21-3
psu create pool dmsdca21-3.1
psu create pool dmsdca21-4
psu create pool dmsdca21-4.1
psu create pool dmsdca21-5
psu create pool dmsdca21-5.1
psu create pool dmsdca21-6
psu create pool dmsdca21-6.1
psu create pool dmsdca21-7
psu create pool dmsdca21-7.1
psu create pool dmsdca21-8
psu create pool dmsdca21-8.1

psu create pgroup resilient-group -resilient
psu addto pgroup resilient-group dmsdca15-1.1
psu addto pgroup resilient-group dmsdca15-2.1
psu addto pgroup resilient-group dmsdca15-3.1
psu addto pgroup resilient-group dmsdca15-4.1
psu addto pgroup resilient-group dmsdca18-1.1
psu addto pgroup resilient-group dmsdca19-1.1
psu addto pgroup resilient-group dmsdca20-1.1
psu addto pgroup resilient-group dmsdca20-2.1
psu addto pgroup resilient-group dmsdca21-1.1
psu addto pgroup resilient-group dmsdca21-2.1
psu addto pgroup resilient-group dmsdca21-3.1
psu addto pgroup resilient-group dmsdca21-4.1

psu create pgroup resilient-tape-group -resilient
psu addto pgroup resilient-tape-group dmsdca15-5.1
psu addto pgroup resilient-tape-group dmsdca15-6.1
psu addto pgroup resilient-tape-group dmsdca15-7.1
psu addto pgroup resilient-tape-group dmsdca15-8.1
psu addto pgroup resilient-tape-group dmsdca18-2.1
psu addto pgroup resilient-tape-group dmsdca19-2.1
psu addto pgroup resilient-tape-group dmsdca20-3.1
psu addto pgroup resilient-tape-group dmsdca20-4.1
psu addto pgroup resilient-tape-group dmsdca21-5.1
psu addto pgroup resilient-tape-group dmsdca21-6.1
psu addto pgroup resilient-tape-group dmsdca21-7.1
psu addto pgroup resilient-tape-group dmsdca21-8.1

psu create pgroup stage-group
psu addto pgroup stage-group dmsdca15-3
psu addto pgroup stage-group dmsdca20-3
psu addto pgroup stage-group dmsdca21-3

psu create pgroup tape-group
psu addto pgroup tape-group dmsdca15-2
psu addto pgroup tape-group dmsdca18-2
psu addto pgroup tape-group dmsdca19-2
psu addto pgroup tape-group dmsdca20-2
psu addto pgroup tape-group dmsdca21-2

psu create pgroup volatile-group
psu addto pgroup volatile-group dmsdca15-1
psu addto pgroup volatile-group dmsdca18-1
psu addto pgroup volatile-group dmsdca19-1
psu addto pgroup volatile-group dmsdca20-1
psu addto pgroup volatile-group dmsdca21-1

psu create pgroup internal-group
psu addto pgroup internal-group dmsdca20-4
psu addto pgroup internal-group dmsdca21-4
psu addto pgroup internal-group dmsdca21-5
psu addto pgroup internal-group dmsdca21-6
psu addto pgroup internal-group dmsdca21-7
psu addto pgroup internal-group dmsdca21-8

psu create pgroup wan-group
psu addto pgroup wan-group dmsdca15-4
psu addto pgroup wan-group dmsdca15-5
psu addto pgroup wan-group dmsdca15-6
psu addto pgroup wan-group dmsdca15-7
psu addto pgroup wan-group dmsdca15-8

psu create link resilient-link any-protocol resilient world-net
psu set link resilient-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=-1 -section=default
psu addto link resilient-link resilient-group

psu create link resilient-tape-link any-protocol resilient-tape world-net
psu set link resilient-tape-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=10 -section=stage
psu addto link resilient-tape-link resilient-tape-group

psu create link tape-link any-protocol tape world-net
psu set link tape-link -readpref=10 -writepref=10 -cachepref=10 -p2ppref=-1 -section=default
psu addto link tape-link tape-group

psu create link volatile-link any-protocol volatile world-net
psu set link volatile-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=-1 -section=default
psu addto link volatile-link volatile-group

psu create link wan-link any-protocol wan world-net
psu set link wan-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=-1 -section=default
psu addto link wan-link wan-group

psu create link internal-link any-protocol internal world-net
psu set link internal-link -readpref=0 -writepref=0 -cachepref=0 -p2ppref=10 -section=default
psu addto link internal-link internal-group

psu create link stage-link any-protocol stage world-net
psu set link stage-link -readpref=0 -writepref=0 -cachepref=10 -p2ppref=10 -section=stage
psu add link stage-link stage-group

rc onerror suspend
rc set max retries 3
rc set retry 900
rc set poolpingtimer 600
rc set max restore unlimited
